<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>#9 ç¢ºèªãƒ†ã‚¹ãƒˆï½œé…µç´ ãƒ»ATPï¼ˆè„±ãƒ»æš—è¨˜ï¼‰</title>
  <style>
    :root{
      --bg1:#667eea; --bg2:#764ba2;
      --card:#ffffff; --text:#1f2937; --muted:#6b7280;
      --good:#16a34a; --bad:#dc2626; --accent:#f59e0b;
      --chip:#111827; --chip2:#0f172a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 700px at 10% 10%, rgba(255,255,255,0.15), transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
      padding: 20px 12px 40px;
    }
    .wrap{max-width:980px; margin:0 auto;}
    .hero{
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 18px;
      padding: 18px 16px;
      backdrop-filter: blur(8px);
    }
    .titleRow{display:flex; gap:10px; align-items:flex-start; flex-wrap:wrap;}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      background: rgba(220,38,38,0.95);
      color:#fff; font-weight:800;
      padding: 6px 10px; border-radius: 999px;
      letter-spacing: .04em;
      box-shadow: 0 8px 18px rgba(0,0,0,0.18);
    }
    .kicker{
      display:inline-flex; align-items:center; gap:8px;
      background: rgba(17,24,39,0.92);
      color:#fff; font-weight:700;
      padding: 6px 10px; border-radius: 999px;
    }
    h1{margin:8px 0 6px; font-size: clamp(20px, 3.2vw, 34px); color:#fff;}
    .sub{color: rgba(255,255,255,0.88); margin:0; line-height:1.6}

    .grid{display:grid; grid-template-columns: 1fr; gap: 14px; margin-top: 14px;}
    .card{
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(17,24,39,0.08);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.18);
    }

    .topbar{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
    .progressWrap{flex: 1 1 320px;}
    .progressLabel{display:flex; justify-content:space-between; color:var(--muted); font-size:13px; margin-bottom:6px;}
    .progress{
      width:100%; height:10px; border-radius:999px;
      background: #e5e7eb;
      overflow:hidden;
    }
    .progress > div{height:100%; width:0%; background: linear-gradient(90deg, #22c55e, #f59e0b);}

    .pillRow{display:flex; gap:8px; flex-wrap:wrap;}
    .pill{
      font-size:12px; color:#fff; font-weight:700;
      background: #111827;
      padding: 6px 10px; border-radius:999px;
    }
    .pill.accent{background: #0ea5e9;}
    .pill.pass{background: #16a34a;}

    .qhead{display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap;}
    .qno{
      font-weight:900;
      background: #111827;
      color:#fff;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing:.03em;
    }
    .difficulty{
      font-weight:800; font-size:12px;
      padding:6px 10px; border-radius:999px;
      background:#f3f4f6; color:#111827;
      border:1px solid rgba(17,24,39,0.10);
    }
    .difficulty.b{background:#ecfeff;}
    .difficulty.a{background:#fff7ed;}
    .difficulty.s{background:#fdf2f8;}

    .qtext{margin:10px 0 12px; font-size: 16px; line-height:1.6;}

    .options{display:grid; gap:10px;}
    .opt{
      width:100%; text-align:left;
      border-radius: 14px;
      border: 1px solid rgba(17,24,39,0.12);
      background: #fff;
      padding: 12px 12px;
      font-weight: 700;
      cursor: pointer;
      transition: transform .06s ease, border-color .15s ease, box-shadow .15s ease;
    }
    .opt:hover{transform: translateY(-1px); box-shadow: 0 10px 18px rgba(0,0,0,0.08);}
    .opt.selected{border-color:#2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.18)}
    .opt.correct{border-color: var(--good); background: rgba(22,163,74,0.08)}
    .opt.wrong{border-color: var(--bad); background: rgba(220,38,38,0.08)}

    .actions{display:flex; gap:10px; margin-top: 12px; flex-wrap:wrap;}
    .btn{
      border:0; cursor:pointer; font-weight:900;
      padding: 12px 14px; border-radius: 12px;
      background:#111827; color:#fff;
    }
    .btn.secondary{background:#e5e7eb; color:#111827;}
    .btn:disabled{opacity:.45; cursor:not-allowed;}

    .explain{
      margin-top: 12px;
      border-radius: 14px;
      padding: 12px;
      background: #f8fafc;
      border: 1px solid rgba(17,24,39,0.10);
      display:none;
    }
    .explain.good{border-color: rgba(22,163,74,0.35); background: rgba(22,163,74,0.06)}
    .explain.bad{border-color: rgba(220,38,38,0.35); background: rgba(220,38,38,0.06)}
    .explain h3{margin:0 0 6px; font-size:14px;}
    .explain p{margin:0; color:var(--text); line-height:1.6;}
    .explain .mini{margin-top:8px; color:var(--muted); font-size: 12px;}

    .result{display:none;}
    .score{
      font-size: 34px; font-weight: 1000;
      margin: 2px 0 8px;
    }
    .judge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 12px; border-radius:999px;
      font-weight: 900;
    }
    .judge.pass{background: rgba(22,163,74,0.12); color: #166534; border: 1px solid rgba(22,163,74,0.35)}
    .judge.fail{background: rgba(220,38,38,0.12); color: #991b1b; border: 1px solid rgba(220,38,38,0.35)}

    .footer{
      margin-top: 14px;
      color: rgba(255,255,255,0.9);
      font-size: 12px;
      text-align:center;
    }

    @media(min-width: 900px){
      .grid{grid-template-columns: 1.15fr 0.85fr; align-items:start;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div class="titleRow">
        <span class="badge">è„±ãƒ»æš—è¨˜ï¼</span>
        <span class="kicker">LECTURE NO.09ï½œé…µç´ ãƒ»ATP</span>
        <span class="kicker" style="background: rgba(245,158,11,0.95); color:#111827;">åˆæ ¼ãƒ©ã‚¤ãƒ³ï¼š8/10</span>
      </div>
      <h1>#9 ç¢ºèªãƒ†ã‚¹ãƒˆï½œé…µç´ ãƒ»ATPï¼ˆ10å•ãƒ»è§£èª¬ä»˜ãï¼‰</h1>
      <p class="sub">ã€Œãªãœï¼Ÿã€ã§ç¹‹ã’ã‚‹ï¼šé…µç´ ï¼ˆé˜»å®³ï¼Vmaxã§åˆ¤å®šï¼‰â†’ ATPï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼é€šè²¨ï¼‰â†’ è„±å…±å½¹ï¼ˆç©ºå›ã‚Šï¼‰ã€‚ã‚¹ãƒãƒ›ã§ã‚‚è§£ãã‚„ã™ã„è¨­è¨ˆã§ã™ã€‚</p>
    </div>

    <div class="grid">
      <div class="card" id="quizCard">
        <div class="topbar">
          <div class="progressWrap">
            <div class="progressLabel"><span id="progressText">é€²æ—ï¼š0/10</span><span id="scoreText">ã‚¹ã‚³ã‚¢ï¼š0</span></div>
            <div class="progress"><div id="progressBar"></div></div>
          </div>
          <div class="pillRow">
            <span class="pill accent">#é…µç´ </span>
            <span class="pill accent">#ATP</span>
            <span class="pill pass">8/10åˆæ ¼</span>
          </div>
        </div>

        <div id="questionArea" style="margin-top:14px;"></div>

        <div class="actions">
          <button class="btn secondary" id="prevBtn">â† å‰ã¸</button>
          <button class="btn" id="nextBtn">æ¬¡ã¸ â†’</button>
          <button class="btn" id="finishBtn" style="display:none;">æ¡ç‚¹ã—ã¦çµæœã‚’è¦‹ã‚‹</button>
          <button class="btn secondary" id="retryBtn" style="display:none;">ã‚‚ã†ä¸€åº¦ã‚„ã‚‹ï¼ˆãƒªãƒˆãƒ©ã‚¤ï¼‰</button>
        </div>
      </div>

      <div class="card" id="sideCard">
        <h2 style="margin:0 0 10px; font-size:16px;">ä½¿ã„æ–¹</h2>
        <ul style="margin:0; padding-left:18px; color:var(--text); line-height:1.75;">
          <li>å„å•4æŠã€‚é¸ã¶ã¨è‡ªå‹•ã§è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚</li>
          <li>ã€Œæ¬¡ã¸ã€ã§é€²ã¿ã€æœ€å¾Œã«æ¡ç‚¹ã—ã¾ã™ã€‚</li>
          <li>è§£èª¬ã‚’èª­ã‚“ã ã‚‰ã€Œãƒªãƒˆãƒ©ã‚¤ã€ã§æº€ç‚¹ã‚’ç‹™ã„ã¾ã—ã‚‡ã†ã€‚</li>
        </ul>
        <div style="margin-top:12px; padding:12px; border-radius:14px; background:#fff7ed; border:1px solid rgba(245,158,11,0.35);">
          <div style="font-weight:900; margin-bottom:6px;">é »å‡ºã²ã£ã‹ã‘</div>
          <div style="color:#7c2d12; line-height:1.65; font-weight:700;">
            ãƒ»é…µç´ ã¯Î”Gã‚’å¤‰ãˆãªã„ï¼ˆå¤‰ãˆã‚‹ã®ã¯æ´»æ€§åŒ–ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼‰<br/>
            ãƒ»é˜»å®³ã®åˆ¤å®šã¯ã€Œä½ç½®ã€ã§ã¯ãªãã€ŒVmaxã¾ã§è¡Œãã‹ã€
          </div>
        </div>

        <div id="resultArea" class="result" style="margin-top:14px;">
          <h2 style="margin:0 0 6px; font-size:16px;">çµæœ</h2>
          <div class="score" id="finalScore">0/10</div>
          <div id="judge" class="judge fail">åˆ¤å®šï¼šæœªæ¡ç‚¹</div>
          <p id="advice" style="margin:10px 0 0; color:var(--muted); line-height:1.65;"></p>
        </div>
      </div>
    </div>

    <div class="footer">Â© KAZUKI ç”Ÿç‰©ï½œ#9 é…µç´ ãƒ»ATP ç¢ºèªãƒ†ã‚¹ãƒˆï¼ˆHTMLå˜ä½“ãƒ»å€‹äººæƒ…å ±ãªã—ï¼‰</div>
  </div>

<script>
const PASS_LINE = 8;

const questions = [
  {
    id: 1,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "é…µç´ ï¼ˆenzymeï¼‰ã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "åå¿œã®Î”Gï¼ˆåå¿œç†±ï¼‰ã‚’å¤‰ãˆã¦åå¿œã‚’é€²ã¿ã‚„ã™ãã™ã‚‹ç‰©è³ª",
      "ç”Ÿä½“å†…ã§åŒ–å­¦åå¿œã‚’ä¿ƒé€²ã™ã‚‹ã‚¿ãƒ³ãƒ‘ã‚¯è³ªæ€§ã®è§¦åª’ã§ã€è‡ªèº«ã¯åå¿œå‰å¾Œã§åŸºæœ¬çš„ã«å¤‰åŒ–ã—ãªã„",
      "åå¿œå¾Œã«å¿…ãšåˆ†è§£ã•ã‚Œã‚‹ãŸã‚ã€æ¯å›æ–°ã—ãåˆæˆãŒå¿…è¦ãªç‰©è³ª",
      "åŸºè³ªã¨ç„¡é–¢ä¿‚ã«ã€ã©ã‚“ãªåå¿œã§ã‚‚åŒã˜é€Ÿåº¦ã§é€²ã‚ã‚‹ç‰©è³ª"
    ],
    answer: 1,
    explain: "é…µç´ ã¯ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã§ã§ããŸç”Ÿä½“è§¦åª’ã€‚åå¿œã‚’é€Ÿã‚ã¾ã™ãŒã€è‡ªèº«ã¯åŸºæœ¬çš„ã«æ¶ˆè²»ã•ã‚Œãšç¹°ã‚Šè¿”ã—ä½¿ãˆã¾ã™ï¼ˆè§¦åª’ï¼‰ã€‚"
  },
  {
    id: 2,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "é…µç´ ã®ã€åŸºè³ªç‰¹ç•°æ€§ã€ãŒç”Ÿã¾ã‚Œã‚‹ä¸»ãªç†ç”±ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ï¼Ÿ",
    options: [
      "é…µç´ ã¯ã™ã¹ã¦åŒã˜å½¢ãªã®ã§ã€ã©ã®åŸºè³ªã«ã‚‚çµåˆã§ãã‚‹",
      "æ´»æ€§éƒ¨ä½ã®ç«‹ä½“æ§‹é€ ã‚„é›»è·ãƒ»è¦ªæ°´/ç–æ°´æ€§ãŒã€ç‰¹å®šã®åŸºè³ªã¨ç›¸è£œçš„ã«åˆã†",
      "åŸºè³ªç‰¹ç•°æ€§ã¯æ¸©åº¦ã ã‘ã§æ±ºã¾ã‚‹",
      "é…µç´ ã¯æ ¸é…¸ã§ã§ãã¦ã„ã‚‹ãŸã‚å¡©åŸºé…åˆ—ã§åŸºè³ªãŒæ±ºã¾ã‚‹"
    ],
    answer: 1,
    explain: "æ´»æ€§éƒ¨ä½ï¼ˆActive siteï¼‰ã®å½¢ãƒ»é›»è·ãƒ»è¦ªæ°´/ç–æ°´æ€§ãªã©ã®ç›¸æ€§ãŒã€ç‰¹å®šã®åŸºè³ªã ã‘ã‚’é¸ã³ã¾ã™ã€‚"
  },
  {
    id: 3,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "ã€èª˜å°é©åˆï¼ˆinduced fitï¼‰ãƒ¢ãƒ‡ãƒ«ã€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«æœ€ã‚‚è¿‘ã„æ¯”å–©ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "éµã¨éµç©´ï¼šæœ€åˆã‹ã‚‰å½¢ãŒå®Œå…¨ã«å›ºå®šã•ã‚Œã¦ã„ã‚‹",
      "æ¡æ‰‹ï¼šç›¸æ‰‹ï¼ˆåŸºè³ªï¼‰ã«åˆã‚ã›ã¦é…µç´ å´ã‚‚å½¢ã‚’èª¿æ•´ã™ã‚‹",
      "çŸ³ã¨ç´™ï¼šå¼·ã„æ–¹ãŒä¸€æ–¹çš„ã«å‹ã¤",
      "äº¤é€šä¿¡å·ï¼šä¸€å®šå‘¨æœŸã§å¤‰ã‚ã‚‹"
    ],
    answer: 1,
    explain: "å°æœ¬ã®æ¯”å–©ã©ãŠã‚Šã€èª˜å°é©åˆã¯â€œæ¡æ‰‹â€ã€‚åŸºè³ªã«åˆã‚ã›ã¦é…µç´ å´ãŒå½¢ã‚’å¤‰ãˆã€åå¿œã‚’é€²ã‚ã‚„ã™ãã—ã¾ã™ã€‚"
  },
  {
    id: 4,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "é…µç´ ãŒå¤‰ãˆã‚‹ã®ã¯ã©ã‚Œï¼Ÿï¼ˆã²ã£ã‹ã‘é »å‡ºï¼‰",
    options: [
      "åå¿œã®ã‚¹ã‚¿ãƒ¼ãƒˆã¨ã‚´ãƒ¼ãƒ«ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®ï¼ˆÎ”Gï¼‰",
      "æ´»æ€§åŒ–ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆåå¿œã®é€”ä¸­ã®å£ã®é«˜ã•ï¼‰",
      "ç”Ÿæˆç‰©ã®ç¨®é¡",
      "åå¿œã®åŒ–å­¦å¼ãã®ã‚‚ã®"
    ],
    answer: 1,
    explain: "é…µç´ ã¯Î”Gï¼ˆå‡ºç™ºç‚¹ã¨åˆ°é”ç‚¹ã®å·®ï¼‰ã¯å¤‰ãˆã¾ã›ã‚“ã€‚å¤‰ãˆã‚‹ã®ã¯é€”ä¸­ã®â€œå£â€ï¼æ´»æ€§åŒ–ã‚¨ãƒãƒ«ã‚®ãƒ¼ã§ã™ã€‚"
  },
  {
    id: 5,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "ãƒ’ãƒˆã®é…µç´ ã®æœ€é©æ¸©åº¦ã¨ã—ã¦è¬›ç¾©ã§å¼·èª¿ã•ã‚Œã¦ã„ãŸç›®å®‰ã¯ï¼Ÿ",
    options: ["0â„ƒ", "ç´„37â„ƒ", "ç´„60â„ƒ", "ç´„100â„ƒ"],
    answer: 1,
    explain: "ãƒ’ãƒˆã®é…µç´ ã¯ä½“æ¸©ä»˜è¿‘ï¼ˆç´„37â„ƒï¼‰ãŒç›®å®‰ã€‚é«˜æ¸©ã§ã¯å¤‰æ€§ã—ã¦å¤±æ´»ã—ã‚„ã™ã„ã§ã™ã€‚"
  },
  {
    id: 6,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "æœ€é©pHã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "ãƒšãƒ—ã‚·ãƒ³ï¼š7ï¼ã‚¢ãƒŸãƒ©ãƒ¼ã‚¼ï¼š2ï¼ãƒˆãƒªãƒ—ã‚·ãƒ³ï¼š8",
      "ãƒšãƒ—ã‚·ãƒ³ï¼š2ï¼ã‚¢ãƒŸãƒ©ãƒ¼ã‚¼ï¼š7ï¼ãƒˆãƒªãƒ—ã‚·ãƒ³ï¼š8",
      "ãƒšãƒ—ã‚·ãƒ³ï¼š8ï¼ã‚¢ãƒŸãƒ©ãƒ¼ã‚¼ï¼š7ï¼ãƒˆãƒªãƒ—ã‚·ãƒ³ï¼š2",
      "ãƒšãƒ—ã‚·ãƒ³ï¼š7ï¼ã‚¢ãƒŸãƒ©ãƒ¼ã‚¼ï¼š8ï¼ãƒˆãƒªãƒ—ã‚·ãƒ³ï¼š2"
    ],
    answer: 1,
    explain: "è¬›ç¾©ã®ä»£è¡¨ä¾‹ï¼šãƒšãƒ—ã‚·ãƒ³pH2ã€ã‚¢ãƒŸãƒ©ãƒ¼ã‚¼pH7ã€ãƒˆãƒªãƒ—ã‚·ãƒ³pH8ã€‚"
  },
  {
    id: 7,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "ç«¶äº‰é˜»å®³ï¼ˆcompetitive inhibitionï¼‰ã¨éç«¶äº‰é˜»å®³ï¼ˆnon-competitive inhibitionï¼‰ã®è¦‹åˆ†ã‘æ–¹ã¨ã—ã¦æ­£ã—ã„ã®ã¯ï¼Ÿ",
    options: [
      "ã‚°ãƒ©ãƒ•ãŒä¸Šã«ã‚ã‚‹æ–¹ãŒå¿…ãšç«¶äº‰é˜»å®³",
      "æœ€çµ‚çš„ã«VmaxãŒå…ƒã®é«˜ã•ã¾ã§æˆ»ã‚‹ãªã‚‰ç«¶äº‰é˜»å®³ã€Vmaxè‡ªä½“ãŒä½ä¸‹ã™ã‚‹ãªã‚‰éç«¶äº‰é˜»å®³",
      "åŸºè³ªæ¿ƒåº¦ã‚’ä¸Šã’ã¦ã‚‚å¿…ãšVmaxã¯åŒã˜ã«ãªã‚‹",
      "ã©ã¡ã‚‰ã‚‚Vmaxã¯å¿…ãšä½ä¸‹ã™ã‚‹"
    ],
    answer: 1,
    explain: "é‡è¦ãƒ«ãƒ¼ãƒ«ï¼šä½ç½®ã§ã¯ãªãâ€œVmaxã¾ã§è¡Œãã‹â€ã€‚Vmaxä¸å¤‰â†’ç«¶äº‰é˜»å®³ã€Vmaxä½ä¸‹â†’éç«¶äº‰é˜»å®³ã€‚"
  },
  {
    id: 8,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "ATPã®åŸºæœ¬æ§‹é€ ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "ã‚¢ãƒ‡ãƒ‹ãƒ³ï¼‹ãƒªãƒœãƒ¼ã‚¹ï¼‹ãƒªãƒ³é…¸ãŒ1ã¤",
      "ã‚¢ãƒ‡ãƒ‹ãƒ³ï¼‹ãƒªãƒœãƒ¼ã‚¹ï¼‹ãƒªãƒ³é…¸ãŒ3ã¤",
      "ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ï¼‹ãƒªãƒ³é…¸ãŒ3ã¤",
      "è„‚è‚ªé…¸ï¼‹ã‚°ãƒªã‚»ãƒ­ãƒ¼ãƒ«ï¼‹ãƒªãƒ³é…¸ãŒ3ã¤"
    ],
    answer: 1,
    explain: "ATPã¯ã‚¢ãƒ‡ãƒ‹ãƒ³ï¼ˆå¡©åŸºï¼‰ï¼‹ãƒªãƒœãƒ¼ã‚¹ï¼ˆç³–ï¼‰ï¼‹ãƒªãƒ³é…¸3ã¤ã€‚ã“ã‚ŒãŒâ€œé€šè²¨â€ã¨ã—ã¦ä½¿ã„ã‚„ã™ã„å½¢ã®åŸºæœ¬ã§ã™ã€‚"
  },
  {
    id: 9,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "ATPãŒä½“å†…ã«å°‘é‡ï¼ˆä¾‹ï¼š50gç¨‹åº¦ï¼‰ã—ã‹å­˜åœ¨ã—ãªã„ã®ã«ç”Ÿå‘½æ´»å‹•ã‚’æ”¯ãˆã‚‰ã‚Œã‚‹ç†ç”±ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ï¼Ÿ",
    options: [
      "ATPã¯ä¸€åº¦ä½¿ã†ã¨äºŒåº¦ã¨å†åˆ©ç”¨ã§ããªã„ãŒã€å¸¸ã«å¤§é‡ã«è“„ãˆã¦ã„ã‚‹ã‹ã‚‰",
      "ATP-ADPã‚µã‚¤ã‚¯ãƒ«ã§é«˜é€Ÿã«ãƒªã‚µã‚¤ã‚¯ãƒ«ã•ã‚Œã€1æ—¥ã«ä½•åƒå›ã‚‚å›è»¢ã™ã‚‹ã‹ã‚‰",
      "ATPã¯åå¿œã‚’è§¦åª’ã™ã‚‹ã‹ã‚‰",
      "ATPã¯ç´°èƒå£ã«è²¯è”µã•ã‚Œã‚‹ã‹ã‚‰"
    ],
    answer: 1,
    explain: "ATPã¯â€œãƒãƒƒãƒ†ãƒªãƒ¼â€ã®ã‚ˆã†ã«å……é›»ï¼ˆåˆæˆï¼‰ã¨æ”¾é›»ï¼ˆåˆ†è§£ï¼‰ã‚’é«˜é€Ÿã«ç¹°ã‚Šè¿”ã™ï¼ATP-ADPã‚µã‚¤ã‚¯ãƒ«ãŒæœ¬è³ªã§ã™ã€‚"
  },
  {
    id: 10,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "ã€é˜»å®³å‰¤ã€ã¨ã€è„±å…±å½¹å‰¤ã€ã®é•ã„ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "è„±å…±å½¹å‰¤ã¯é…¸ç´ æ¶ˆè²»ã‚‚ATPåˆæˆã‚‚æ­¢ã‚ã‚‹",
      "é˜»å®³å‰¤ã¯é…¸ç´ æ¶ˆè²»ã¯ç¶šããŒATPåˆæˆã ã‘æ­¢ã‚ã‚‹",
      "è„±å…±å½¹å‰¤ã¯é…¸ç´ æ¶ˆè²»ã¯ç¶šãï¼ˆç©ºå›ã‚Šï¼‰ä¸€æ–¹ã§ATPåˆæˆãŒæ­¢ã¾ã‚Šã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ç†±ã¨ã—ã¦æ”¾å‡ºã•ã‚Œã‚‹",
      "ã©ã¡ã‚‰ã‚‚é…¸ç´ æ¶ˆè²»ã¯å¿…ãšå¢—ãˆã‚‹"
    ],
    answer: 2,
    explain: "è„±å…±å½¹å‰¤ã¯H+æ¿ƒåº¦å‹¾é…ã‚’å£Šã™ã®ã§é…¸ç´ æ¶ˆè²»ã¯ç¶šããŒATPåˆæˆãŒæ­¢ã¾ã‚‹ï¼ˆç©ºå›ã‚Šï¼‰ã€‚é˜»å®³å‰¤ã¯é›»å­ä¼é”ç³»ã‚’æ­¢ã‚ã‚‹ãŸã‚é…¸ç´ æ¶ˆè²»ã‚‚æ­¢ã¾ã‚Šã‚„ã™ã„ã€ãŒè¬›ç¾©ã®æ ¸ã§ã™ã€‚"
  }
];

let state = {
  index: 0,
  answers: Array(questions.length).fill(null),
  checked: Array(questions.length).fill(false)
};

const elQ = document.getElementById('questionArea');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const finishBtn = document.getElementById('finishBtn');
const retryBtn = document.getElementById('retryBtn');
const progressText = document.getElementById('progressText');
const scoreText = document.getElementById('scoreText');
const progressBar = document.getElementById('progressBar');
const resultArea = document.getElementById('resultArea');
const finalScore = document.getElementById('finalScore');
const judge = document.getElementById('judge');
const advice = document.getElementById('advice');

function calcScore(){
  let s=0;
  for(let i=0;i<questions.length;i++){
    if(state.answers[i]===questions[i].answer) s++;
  }
  return s;
}

function updateTop(){
  const done = state.answers.filter(v=>v!==null).length;
  progressText.textContent = `é€²æ—ï¼š${state.index+1}/${questions.length}ï¼ˆå›ç­”æ¸ˆã¿ ${done}/${questions.length}ï¼‰`;
  const s = calcScore();
  scoreText.textContent = `ã‚¹ã‚³ã‚¢ï¼š${s}`;
  progressBar.style.width = `${((state.index)/ (questions.length-1))*100}%`;
}

function render(){
  const q = questions[state.index];
  updateTop();

  const picked = state.answers[state.index];
  const checked = state.checked[state.index];

  const diffClass = q.level;
  elQ.innerHTML = `
    <div class="qhead">
      <div class="qno">Q${q.id}</div>
      <div class="difficulty ${diffClass}">${q.difficulty}</div>
    </div>
    <div class="qtext">${q.q}</div>
    <div class="options">
      ${q.options.map((t,idx)=>{
        let cls = 'opt';
        if(picked===idx) cls += ' selected';
        if(checked){
          if(idx===q.answer) cls += ' correct';
          else if(picked===idx && picked!==q.answer) cls += ' wrong';
        }
        return `<button class="${cls}" data-idx="${idx}">${['A','B','C','D'][idx]}. ${t}</button>`;
      }).join('')}
    </div>
    <div class="explain" id="explainBox"></div>
  `;

  const explainBox = document.getElementById('explainBox');
  if(checked){
    const ok = picked===q.answer;
    explainBox.className = 'explain ' + (ok ? 'good':'bad');
    explainBox.style.display = 'block';
    explainBox.innerHTML = `
      <h3>${ok ? 'âœ… æ­£è§£ï¼' : 'âŒ ä¸æ­£è§£â€¦'}</h3>
      <p>${q.explain}</p>
      <div class="mini">ãƒã‚¤ãƒ³ãƒˆï¼šæš—è¨˜ã§ã¯ãªãã€Œãªãœãã†ãªã‚‹ã‹ã€ã‚’è¨€èªåŒ–â†’å›³ã§æã‘ã‚‹ã‹ã§ç¢ºèªã€‚</div>
    `;
  } else {
    explainBox.style.display = 'none';
  }

  // Buttons
  prevBtn.disabled = state.index===0;
  const isLast = state.index===questions.length-1;
  nextBtn.style.display = isLast ? 'none' : 'inline-block';
  finishBtn.style.display = isLast ? 'inline-block' : 'none';

  // option click
  document.querySelectorAll('.opt').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const idx = Number(btn.getAttribute('data-idx'));
      state.answers[state.index]=idx;
      // show explanation immediately
      state.checked[state.index]=true;
      render();
    });
  });
}

prevBtn.addEventListener('click', ()=>{ state.index--; render(); });
nextBtn.addEventListener('click', ()=>{ state.index++; render(); });

finishBtn.addEventListener('click', ()=>{
  // check all unanswered? allow but warn in advice
  const score = calcScore();
  resultArea.style.display = 'block';
  finalScore.textContent = `${score}/10`;
  const passed = score>=PASS_LINE;
  judge.className = 'judge ' + (passed ? 'pass':'fail');
  judge.textContent = passed ? `ğŸ‰ åˆæ ¼ï¼ˆ${PASS_LINE}/10ä»¥ä¸Šï¼‰` : `ã‚ã¨${PASS_LINE-score}å•ã§åˆæ ¼ï¼ˆåˆæ ¼ãƒ©ã‚¤ãƒ³ ${PASS_LINE}/10ï¼‰`;

  const unanswered = state.answers.filter(v=>v===null).length;
  let msg = '';
  if(unanswered>0){
    msg += `æœªå›ç­”ãŒ${unanswered}å•ã‚ã‚Šã¾ã™ã€‚ã¾ãšã¯å…¨å•å›ç­”â†’ãƒªãƒˆãƒ©ã‚¤ãŒãŠã™ã™ã‚ã€‚ `;
  }
  if(passed){
    msg += 'æ¬¡ã¯ã€Œé˜»å®³å‰¤ vs è„±å…±å½¹å‰¤ã€ã®èª¬æ˜ã‚’â€œè‡ªåˆ†ã®è¨€è‘‰â€ã§1åˆ†ã§è¨€ãˆã‚‹ã‹æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†ã€‚';
  } else {
    msg += 'ã¾ãšã¯Q4ï¼ˆÎ”Gã¨æ´»æ€§åŒ–ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼‰ã¨Q7ï¼ˆVmaxåˆ¤å®šï¼‰ã‚’è¨€èªåŒ–â†’å›³ã§æã„ã¦ã‹ã‚‰å†æŒ‘æˆ¦ï¼';
  }
  advice.textContent = msg;

  retryBtn.style.display = 'inline-block';
  finishBtn.disabled = true;
});

retryBtn.addEventListener('click', ()=>{
  state = { index: 0, answers: Array(questions.length).fill(null), checked: Array(questions.length).fill(false)};
  resultArea.style.display = 'none';
  finishBtn.disabled = false;
  retryBtn.style.display = 'none';
  render();
});

render();
</script>
</body>
</html>
