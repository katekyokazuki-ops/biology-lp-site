<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>#10 ç¢ºèªãƒ†ã‚¹ãƒˆï½œä»£è¬ãƒ»ç•°åŒ–ï¼ˆè„±ãƒ»æš—è¨˜ï¼‰</title>
  <style>
    :root{
      --bg1:#667eea; --bg2:#764ba2;
      --text:#111827; --muted:#6b7280;
      --good:#16a34a; --bad:#dc2626; --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 700px at 10% 10%, rgba(255,255,255,0.16), transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
      padding: 20px 12px 40px;
    }
    .wrap{max-width:980px; margin:0 auto;}
    .hero{
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 18px;
      padding: 18px 16px;
      backdrop-filter: blur(8px);
    }
    .row{display:flex; gap:10px; align-items:flex-start; flex-wrap:wrap;}
    .badge{
      display:inline-flex; align-items:center;
      background: rgba(220,38,38,0.95);
      color:#fff; font-weight:900;
      padding: 6px 10px; border-radius: 999px;
      letter-spacing: .04em;
      box-shadow: 0 8px 18px rgba(0,0,0,0.18);
    }
    .chip{
      display:inline-flex; align-items:center;
      background: rgba(17,24,39,0.92);
      color:#fff; font-weight:800;
      padding: 6px 10px; border-radius: 999px;
    }
    .chip.warn{background: rgba(245,158,11,0.95); color:#111827;}
    h1{margin:8px 0 6px; font-size: clamp(20px, 3.2vw, 34px); color:#fff;}
    .sub{color: rgba(255,255,255,0.9); margin:0; line-height:1.6}

    .grid{display:grid; grid-template-columns: 1fr; gap: 14px; margin-top: 14px;}
    .card{
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(17,24,39,0.08);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.18);
    }

    .topbar{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
    .progressWrap{flex:1 1 320px;}
    .progressLabel{display:flex; justify-content:space-between; color:var(--muted); font-size:13px; margin-bottom:6px;}
    .progress{width:100%; height:10px; border-radius:999px; background:#e5e7eb; overflow:hidden;}
    .progress>div{height:100%; width:0%; background: linear-gradient(90deg, #22c55e, #f59e0b);}

    .qhead{display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap;}
    .qno{font-weight:900; background:#111827; color:#fff; padding:6px 10px; border-radius:999px; font-size:12px;}
    .difficulty{font-weight:900; font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid rgba(17,24,39,0.10); background:#f3f4f6;}
    .difficulty.b{background:#ecfeff;}
    .difficulty.a{background:#fff7ed;}
    .difficulty.s{background:#fdf2f8;}

    .qtext{margin:10px 0 12px; font-size:16px; line-height:1.6;}
    .options{display:grid; gap:10px;}
    .opt{
      width:100%; text-align:left;
      border-radius:14px; border:1px solid rgba(17,24,39,0.12);
      background:#fff; padding:12px 12px; font-weight:800;
      cursor:pointer;
      transition: transform .06s ease, border-color .15s ease, box-shadow .15s ease;
    }
    .opt:hover{transform: translateY(-1px); box-shadow: 0 10px 18px rgba(0,0,0,0.08);}
    .opt.selected{border-color:#2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.18)}
    .opt.correct{border-color: var(--good); background: rgba(22,163,74,0.08)}
    .opt.wrong{border-color: var(--bad); background: rgba(220,38,38,0.08)}

    .explain{
      margin-top:12px; border-radius:14px; padding:12px;
      background:#f8fafc; border:1px solid rgba(17,24,39,0.10);
      display:none;
    }
    .explain.good{border-color: rgba(22,163,74,0.35); background: rgba(22,163,74,0.06)}
    .explain.bad{border-color: rgba(220,38,38,0.35); background: rgba(220,38,38,0.06)}
    .explain h3{margin:0 0 6px; font-size:14px;}
    .explain p{margin:0; line-height:1.6;}
    .explain .mini{margin-top:8px; color:var(--muted); font-size:12px;}

    .actions{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;}
    .btn{border:0; cursor:pointer; font-weight:900; padding:12px 14px; border-radius:12px; background:#111827; color:#fff;}
    .btn.secondary{background:#e5e7eb; color:#111827;}
    .btn:disabled{opacity:.45; cursor:not-allowed;}

    .result{display:none;}
    .score{font-size:34px; font-weight:1000; margin:2px 0 8px;}
    .judge{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; font-weight:900;}
    .judge.pass{background: rgba(22,163,74,0.12); color:#166534; border:1px solid rgba(22,163,74,0.35)}
    .judge.fail{background: rgba(220,38,38,0.12); color:#991b1b; border:1px solid rgba(220,38,38,0.35)}

    .footer{margin-top:14px; color: rgba(255,255,255,0.9); font-size:12px; text-align:center;}
    @media(min-width: 900px){.grid{grid-template-columns: 1.15fr 0.85fr; align-items:start;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div class="row">
        <span class="badge">è„±ãƒ»æš—è¨˜ï¼</span>
        <span class="chip">LECTURE NO.10ï½œä»£è¬ãƒ»ç•°åŒ–</span>
        <span class="chip warn">åˆæ ¼ãƒ©ã‚¤ãƒ³ï¼š8/10</span>
      </div>
      <h1>#10 ç¢ºèªãƒ†ã‚¹ãƒˆï½œä»£è¬ãƒ»ç•°åŒ–ï¼ˆ10å•ãƒ»è§£èª¬ä»˜ãï¼‰</h1>
      <p class="sub">ä»£è¬ï¼ã€ŒåŒåŒ–ã¨ç•°åŒ–ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ã€‚ç•°åŒ–ã¯â€œé›»å­ã‚’å–ã‚Šå‡ºã™â€ãƒ—ãƒ­ã‚»ã‚¹ã€‚ç™ºé…µã¯â€œATPã®ãŸã‚â€ã§ã¯ãªãâ€œNAD+å†ç”Ÿâ€ãŒç›®çš„â”€â”€ã“ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆã§å›ºã‚ã¾ã™ã€‚</p>
    </div>

    <div class="grid">
      <div class="card">
        <div class="topbar">
          <div class="progressWrap">
            <div class="progressLabel"><span id="progressText">é€²æ—ï¼š0/10</span><span id="scoreText">ã‚¹ã‚³ã‚¢ï¼š0</span></div>
            <div class="progress"><div id="progressBar"></div></div>
          </div>
          <div class="row">
            <span class="chip" style="background:#0ea5e9;">#ä»£è¬</span>
            <span class="chip" style="background:#0ea5e9;">#ç•°åŒ–</span>
            <span class="chip" style="background:#16a34a;">8/10åˆæ ¼</span>
          </div>
        </div>

        <div id="questionArea" style="margin-top:14px;"></div>

        <div class="actions">
          <button class="btn secondary" id="prevBtn">â† å‰ã¸</button>
          <button class="btn" id="nextBtn">æ¬¡ã¸ â†’</button>
          <button class="btn" id="finishBtn" style="display:none;">æ¡ç‚¹ã—ã¦çµæœã‚’è¦‹ã‚‹</button>
          <button class="btn secondary" id="retryBtn" style="display:none;">ã‚‚ã†ä¸€åº¦ã‚„ã‚‹ï¼ˆãƒªãƒˆãƒ©ã‚¤ï¼‰</button>
        </div>
      </div>

      <div class="card">
        <h2 style="margin:0 0 10px; font-size:16px;">ä½¿ã„æ–¹</h2>
        <ul style="margin:0; padding-left:18px; line-height:1.75;">
          <li>å„å•4æŠã€‚é¸ã¶ã¨ãã®å ´ã§è§£èª¬ãŒå‡ºã¾ã™ã€‚</li>
          <li>æœ€å¾Œã«æ¡ç‚¹ã—ã€8/10ä»¥ä¸Šã§åˆæ ¼ã€‚</li>
          <li>é–“é•ã„ã¯ã€Œãªãœï¼Ÿã€ã‚’è¨€èªåŒ–â†’å›³ã«ã™ã‚‹ã®ãŒæœ€çŸ­ã€‚</li>
        </ul>

        <div style="margin-top:12px; padding:12px; border-radius:14px; background:#fff7ed; border:1px solid rgba(245,158,11,0.35);">
          <div style="font-weight:1000; margin-bottom:6px;">é »å‡ºã²ã£ã‹ã‘ï¼ˆã“ã®å‹•ç”»ã®æ ¸ï¼‰</div>
          <div style="line-height:1.65; font-weight:800; color:#7c2d12;">
            ãƒ»ä»£è¬ã¯ä¸€æœ¬é“ã˜ã‚ƒãªãâ€œãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯â€ã€‘ã€å°æœ¬ã€‘<br/>
            ãƒ»ç™ºé…µã®ç›®çš„ï¼ATPè¿½åŠ ã§ã¯ãªãâ€œNAD+å†ç”Ÿâ€ã€‘ã€å°æœ¬ã€‘<br/>
            ãƒ»ç•°åŒ–ã®ç›®çš„ï¼ã‚°ãƒ«ã‚³ãƒ¼ã‚¹åˆ†è§£ã§ã¯ãªãâ€œé›»å­ã®å–ã‚Šå‡ºã—â€ã€‘ã€å°æœ¬ã€‘
          </div>
        </div>

        <div id="resultArea" class="result" style="margin-top:14px;">
          <h2 style="margin:0 0 6px; font-size:16px;">çµæœ</h2>
          <div class="score" id="finalScore">0/10</div>
          <div id="judge" class="judge fail">åˆ¤å®šï¼šæœªæ¡ç‚¹</div>
          <p id="advice" style="margin:10px 0 0; color:var(--muted); line-height:1.65;"></p>
        </div>
      </div>
    </div>

    <div class="footer">Â© KAZUKI ç”Ÿç‰©ï½œ#10 ä»£è¬ãƒ»ç•°åŒ– ç¢ºèªãƒ†ã‚¹ãƒˆï¼ˆHTMLå˜ä½“ãƒ»å€‹äººæƒ…å ±ãªã—ï¼‰</div>
  </div>

<script>
const PASS_LINE = 8;

const questions = [
  {
    id: 1,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "ã€ä»£è¬ï¼ˆmetabolismï¼‰ã€ã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "å‘¼å¸ã ã‘ã®ã“ã¨",
      "ç”Ÿå‘½ãŒã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ‰‹ã«å…¥ã‚Œã€åˆ©ç”¨ã™ã‚‹ä»•çµ„ã¿å…¨ä½“ï¼ˆåŒåŒ–ï¼‹ç•°åŒ–ã‚’å«ã‚€ï¼‰",
      "ç³–ã‚’åˆ†è§£ã™ã‚‹åå¿œã ã‘ã®ã“ã¨",
      "ATPã‚’ä½¿ã‚ãšã«é€²ã‚€åå¿œã®ç·ç§°"
    ],
    answer: 1,
    explain: "ä»£è¬ã¯ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç²å¾—ã—ã€ä½¿ã†ä»•çµ„ã¿å…¨ä½“ã€ã€‚åŒåŒ–ãƒ»ç•°åŒ–ã‚’ã¾ã¨ã‚ãŸâ€œå…¨ä½“æ¦‚å¿µâ€ã§ã™ã€‚"
  },
  {
    id: 2,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "åŒåŒ–ï¼ˆanabolismï¼‰ã¨ç•°åŒ–ï¼ˆcatabolismï¼‰ã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "åŒåŒ–ï¼šåˆ†è§£ã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼æ”¾å‡ºï¼ç•°åŒ–ï¼šåˆæˆã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼å¸å",
      "åŒåŒ–ï¼šåˆæˆã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼å¸åï¼ç•°åŒ–ï¼šåˆ†è§£ã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼æ”¾å‡º",
      "åŒåŒ–ï¼šé…¸ç´ ã‚’ä½¿ã†ï¼ç•°åŒ–ï¼šé…¸ç´ ã‚’ä½¿ã‚ãªã„",
      "åŒåŒ–ï¼šATPã‚’ä½œã‚‰ãªã„ï¼ç•°åŒ–ï¼šATPã‚’ä½¿ã‚ãªã„"
    ],
    answer: 1,
    explain: "åŒåŒ–ã¯ã€ä½œã‚‹ï¼ˆåˆæˆï¼‰ã€ã§ATPãªã©ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¿…è¦ã¨ã—ã€ç•°åŒ–ã¯ã€å£Šã™ï¼ˆåˆ†è§£ï¼‰ã€ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å–ã‚Šå‡ºã—ã¾ã™ã€‚"
  },
  {
    id: 3,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "è¬›ç¾©ã§å¼·èª¿ï¼šä»£è¬ã¯ã€Aâ†’Bâ†’Câ€¦ã€ã®ä¸€æœ¬é“ã§ã¯ãªãä½•ã¨ã—ã¦æ‰ãˆã‚‹ï¼Ÿ",
    options: [
      "ä¸€æœ¬é“",
      "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆç¶²ã®ç›®ï¼‰",
      "ãƒ©ãƒ³ãƒ€ãƒ ãªåå¿œã®é›†ã¾ã‚Š",
      "ATPã®åˆæˆåå¿œã®ã¿"
    ],
    answer: 1,
    explain: "ä»£è¬ã¯ç¶²ã®ç›®ã®ã‚ˆã†ã«ç¹‹ãŒã£ãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€‚åˆ†å²ãƒ»åˆæµãŒã‚ã‚‹ã®ã§ã€çµŒè·¯ä¸¸æš—è¨˜ã€ãŒç ´ç¶»ã—ã‚„ã™ã„ã€ã¨ã„ã†æ–‡è„ˆã§ã™ã€‚"
  },
  {
    id: 4,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "è¬›ç¾©ã®æ ¸ï¼šç•°åŒ–ã®ã€çœŸã®ç›®çš„ã€ã¨ã—ã¦æœ€ã‚‚è¿‘ã„ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ã‚’å°ã•ãã™ã‚‹ã“ã¨",
      "é›»å­ã‚’å–ã‚Šå‡ºã—ã¦NADH/FADH2ï¼ˆé›»å­é‹æ¬ä½“ï¼‰ã«ä¹—ã›ã‚‹ã“ã¨",
      "CO2ã‚’ä½œã‚‹ã“ã¨",
      "ä¹³é…¸ã‚’ä½œã‚‹ã“ã¨"
    ],
    answer: 1,
    explain: "ç•°åŒ–ã¯ã€é…¸åŒ–ï¼é›»å­ã‚’æŠœãã€ãŒæœ¬è³ªã€‚é›»å­ã‚’NADH/FADH2ã«è¼‰ã›ã¦æ¬¡ã®æ®µéšã«æ¸¡ã™ã®ãŒé‡è¦ã§ã™ã€‚"
  },
  {
    id: 5,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "è§£ç³–ç³»ï¼ˆglycolysisï¼‰ã®â€œç´”åˆ©ç›Šâ€ã¨ã—ã¦æ­£ã—ã„çµ„ã¿åˆã‚ã›ã¯ã©ã‚Œï¼Ÿï¼ˆã‚°ãƒ«ã‚³ãƒ¼ã‚¹1åˆ†å­ï¼‰",
    options: [
      "ATP +2ã€NADH +2",
      "ATP +4ã€NADH +0",
      "ATP +0ã€NADH +2",
      "ATP +2ã€NADH +0"
    ],
    answer: 0,
    explain: "è¬›ç¾©ã§æ‰±ã†å…¸å‹æ•´ç†ï¼šè§£ç³–ç³»ã®ç´”åˆ©ç›Šã¯ATP+2ã€NADH+2ã€‚æœ€åˆã«ATPã‚’â€œæŠ•è³‡â€ã—ã¦å›åã§ä¸Šå›ã‚Šã¾ã™ã€‚"
  },
  {
    id: 6,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "ç™ºé…µã®â€œç›®çš„â€ã¨ã—ã¦æœ€ã‚‚æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "è¿½åŠ ã§å¤§é‡ã®ATPã‚’ä½œã‚‹ãŸã‚",
      "NADHã‚’NAD+ã«æˆ»ã—ã¦ï¼ˆNAD+å†ç”Ÿï¼‰ã€è§£ç³–ç³»ã‚’ç¶šã‘ã‚‹ãŸã‚",
      "é…¸ç´ ã‚’ä½œã‚‹ãŸã‚",
      "TCAå›è·¯ã‚’å›ã™ãŸã‚"
    ],
    answer: 1,
    explain: "é »å‡ºã²ã£ã‹ã‘ï¼šç™ºé…µã®ç›®çš„ã¯ATPè¿½åŠ ã§ã¯ãªãNAD+å†ç”Ÿã€‚é…¸ç´ ãŒãªã„ã¨é›»å­ã®è¡Œãå…ˆãŒãªããªã‚‹ã®ã§ã€å†ç”Ÿã€ãŒå¿…è¦ã€‚"
  },
  {
    id: 7,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "ä¹³é…¸ç™ºé…µã§ã€ãƒ”ãƒ«ãƒ“ãƒ³é…¸ã€ãŒæœãŸã™å½¹å‰²ã¨ã—ã¦æœ€ã‚‚è¿‘ã„ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "ATPã‚’ç›´æ¥å¤§é‡ã«ä½œã‚‹",
      "NADHã‹ã‚‰é›»å­ã‚’å—ã‘å–ã£ã¦NAD+ã‚’å†ç”Ÿã™ã‚‹ï¼ˆé›»å­ã®å—ã‘çš¿ã«ãªã‚‹ï¼‰",
      "é…¸ç´ ã®ä»£ã‚ã‚Šã«é›»å­ä¼é”ç³»ã¸é›»å­ã‚’æ¸¡ã™",
      "DNAåˆæˆã«ä½¿ã‚ã‚Œã‚‹"
    ],
    answer: 1,
    explain: "ä¹³é…¸ç™ºé…µã§ã¯ãƒ”ãƒ«ãƒ“ãƒ³é…¸ãŒé›»å­ã®å—ã‘çš¿ã«ãªã‚Šã€NADHâ†’NAD+ã‚’æˆ»ã—ã¦è§£ç³–ç³»ã‚’ç¶™ç¶šã•ã›ã¾ã™ã€‚"
  },
  {
    id: 8,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "TCAå›è·¯ï¼ˆã‚¯ã‚¨ãƒ³é…¸å›è·¯ï¼‰1å›è»¢ã‚ãŸã‚Šã®åæ”¯ã¨ã—ã¦è¬›ç¾©ã§æ‰±ã†ã‚‚ã®ã¯ï¼Ÿ",
    options: [
      "NADH 3ã€FADH2 1ã€ATP 1",
      "NADH 1ã€FADH2 3ã€ATP 1",
      "NADH 2ã€FADH2 2ã€ATP 0",
      "NADH 3ã€FADH2 0ã€ATP 3"
    ],
    answer: 0,
    explain: "è¬›ç¾©ã®æ¨™æº–æ•´ç†ï¼šTCA1å›è»¢ã§NADHÃ—3ã€FADH2Ã—1ã€ATPÃ—1ï¼ˆGTPï¼‰ç¨‹åº¦ã‚’å›åã—ã¾ã™ã€‚"
  },
  {
    id: 9,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "PFK-1ï¼ˆãƒ›ã‚¹ãƒ›ãƒ•ãƒ«ã‚¯ãƒˆã‚­ãƒŠãƒ¼ã‚¼-1ï¼‰ã®èª¬æ˜ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "è§£ç³–ç³»ã®èª¿ç¯€ç‚¹ï¼ˆå¾‹é€Ÿé…µç´ ï¼‰ã¨ã—ã¦åƒãã€ATPãŒå¤šã„ã¨æŠ‘åˆ¶ã•ã‚Œã‚„ã™ã„",
      "TCAå›è·¯ã®æœ€åˆã®åå¿œã‚’é€²ã‚ã‚‹é…µç´ ",
      "ç™ºé…µã®æœ€çµ‚ç”£ç‰©ã‚’ä½œã‚‹é…µç´ ",
      "é›»å­ä¼é”ç³»ã§é…¸ç´ ã‚’é‚„å…ƒã™ã‚‹é…µç´ "
    ],
    answer: 0,
    explain: "PFK-1ã¯è§£ç³–ç³»ã®é‡è¦ãªèª¿ç¯€ç‚¹ã€‚ATPãŒå¤šã„ï¼ã‚¨ãƒãƒ«ã‚®ãƒ¼ååˆ†ãªã‚‰è§£ç³–ã‚’æŠ‘ãˆã‚‹æ–¹å‘ã«åƒãã¾ã™ã€‚"
  },
  {
    id: 10,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "è¬›ç¾©ã§å‡ºãŸæ•°å€¤ï¼šATPåŠ æ°´åˆ†è§£ã§æ”¾å‡ºã•ã‚Œã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆç›®å®‰ï¼‰ã¯ï¼Ÿ",
    options: [
      "ç´„3.05 kJ/mol",
      "ç´„30.5 kJ/mol",
      "ç´„305 kJ/mol",
      "ç´„3050 kJ/mol"
    ],
    answer: 1,
    explain: "ATP + H2O â†’ ADP + Pi ã®æ”¾å‡ºã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ç´„30.5 kJ/molï¼ˆç›®å®‰ï¼‰ã€‚"
  }
];

let state = {
  index: 0,
  answers: Array(questions.length).fill(null),
  checked: Array(questions.length).fill(false)
};

const elQ = document.getElementById('questionArea');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const finishBtn = document.getElementById('finishBtn');
const retryBtn = document.getElementById('retryBtn');
const progressText = document.getElementById('progressText');
const scoreText = document.getElementById('scoreText');
const progressBar = document.getElementById('progressBar');
const resultArea = document.getElementById('resultArea');
const finalScore = document.getElementById('finalScore');
const judge = document.getElementById('judge');
const advice = document.getElementById('advice');

function calcScore(){
  let s=0;
  for(let i=0;i<questions.length;i++) if(state.answers[i]===questions[i].answer) s++;
  return s;
}

function updateTop(){
  const done = state.answers.filter(v=>v!==null).length;
  progressText.textContent = `é€²æ—ï¼š${state.index+1}/${questions.length}ï¼ˆå›ç­”æ¸ˆã¿ ${done}/${questions.length}ï¼‰`;
  const s = calcScore();
  scoreText.textContent = `ã‚¹ã‚³ã‚¢ï¼š${s}`;
  progressBar.style.width = `${((state.index)/ (questions.length-1))*100}%`;
}

function render(){
  const q = questions[state.index];
  updateTop();

  const picked = state.answers[state.index];
  const checked = state.checked[state.index];

  elQ.innerHTML = `
    <div class="qhead">
      <div class="qno">Q${q.id}</div>
      <div class="difficulty ${q.level}">${q.difficulty}</div>
    </div>
    <div class="qtext">${q.q}</div>
    <div class="options">
      ${q.options.map((t,idx)=>{
        let cls = 'opt';
        if(picked===idx) cls += ' selected';
        if(checked){
          if(idx===q.answer) cls += ' correct';
          else if(picked===idx && picked!==q.answer) cls += ' wrong';
        }
        return `<button class="${cls}" data-idx="${idx}">${['A','B','C','D'][idx]}. ${t}</button>`;
      }).join('')}
    </div>
    <div class="explain" id="explainBox"></div>
  `;

  const explainBox = document.getElementById('explainBox');
  if(checked){
    const ok = picked===q.answer;
    explainBox.className = 'explain ' + (ok ? 'good':'bad');
    explainBox.style.display = 'block';
    explainBox.innerHTML = `
      <h3>${ok ? 'âœ… æ­£è§£ï¼' : 'âŒ ä¸æ­£è§£â€¦'}</h3>
      <p>${q.explain}</p>
      <div class="mini">ãƒã‚¤ãƒ³ãƒˆï¼šåå¿œåæš—è¨˜ã§ã¯ãªãã€é›»å­ã®æµã‚Œã€ã§èª¬æ˜ã§ãã‚‹ã‹ã‚’ç¢ºèªã€‚</div>
    `;
  } else {
    explainBox.style.display = 'none';
  }

  prevBtn.disabled = state.index===0;
  const isLast = state.index===questions.length-1;
  nextBtn.style.display = isLast ? 'none' : 'inline-block';
  finishBtn.style.display = isLast ? 'inline-block' : 'none';

  document.querySelectorAll('.opt').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const idx = Number(btn.getAttribute('data-idx'));
      state.answers[state.index]=idx;
      state.checked[state.index]=true;
      render();
    });
  });
}

prevBtn.addEventListener('click', ()=>{ state.index--; render(); });
nextBtn.addEventListener('click', ()=>{ state.index++; render(); });

finishBtn.addEventListener('click', ()=>{
  const score = calcScore();
  resultArea.style.display = 'block';
  finalScore.textContent = `${score}/10`;
  const passed = score>=PASS_LINE;
  judge.className = 'judge ' + (passed ? 'pass':'fail');
  judge.textContent = passed ? `ğŸ‰ åˆæ ¼ï¼ˆ${PASS_LINE}/10ä»¥ä¸Šï¼‰` : `ã‚ã¨${PASS_LINE-score}å•ã§åˆæ ¼ï¼ˆåˆæ ¼ãƒ©ã‚¤ãƒ³ ${PASS_LINE}/10ï¼‰`;

  const unanswered = state.answers.filter(v=>v===null).length;
  let msg='';
  if(unanswered>0) msg += `æœªå›ç­”ãŒ${unanswered}å•ã‚ã‚Šã¾ã™ã€‚ã¾ãšå…¨å•å›ç­”â†’ãƒªãƒˆãƒ©ã‚¤æ¨å¥¨ã€‚ `;
  if(passed){
    msg += 'æ¬¡ã¯ã€Œç™ºé…µï¼NAD+å†ç”Ÿã€ã€Œç•°åŒ–ï¼é›»å­ã‚’æŠœãã€ã‚’å›³ã§æã‘ã‚‹ã‹æŒ‘æˆ¦ï¼';
  } else {
    msg += 'Q4/Q6ï¼ˆç•°åŒ–ã®ç›®çš„ãƒ»ç™ºé…µã®ç›®çš„ï¼‰ã‚’è¨€èªåŒ–â†’å›³è§£ã—ã¦ã‹ã‚‰å†æŒ‘æˆ¦ï¼';
  }
  advice.textContent = msg;

  retryBtn.style.display='inline-block';
  finishBtn.disabled = true;
});

retryBtn.addEventListener('click', ()=>{
  state = { index:0, answers:Array(questions.length).fill(null), checked:Array(questions.length).fill(false)};
  resultArea.style.display='none';
  finishBtn.disabled=false;
  retryBtn.style.display='none';
  render();
});

render();
</script>
</body>
</html>
