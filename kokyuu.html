<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>#11 ç¢ºèªãƒ†ã‚¹ãƒˆï½œå‘¼å¸ãƒ»é›»å­ä¼é”ç³»ï¼†å®Ÿé¨“ï¼ˆè„±ãƒ»æš—è¨˜ï¼‰</title>
  <style>
    :root{
      --bg1:#667eea; --bg2:#764ba2;
      --text:#111827; --muted:#6b7280;
      --good:#16a34a; --bad:#dc2626; --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 700px at 10% 10%, rgba(255,255,255,0.16), transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
      padding: 20px 12px 40px;
    }
    .wrap{max-width:980px; margin:0 auto;}
    .hero{
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 18px;
      padding: 18px 16px;
      backdrop-filter: blur(8px);
    }
    .row{display:flex; gap:10px; align-items:flex-start; flex-wrap:wrap;}
    .badge{
      display:inline-flex; align-items:center;
      background: rgba(220,38,38,0.95);
      color:#fff; font-weight:900;
      padding: 6px 10px; border-radius: 999px;
      letter-spacing: .04em;
      box-shadow: 0 8px 18px rgba(0,0,0,0.18);
    }
    .chip{
      display:inline-flex; align-items:center;
      background: rgba(17,24,39,0.92);
      color:#fff; font-weight:800;
      padding: 6px 10px; border-radius: 999px;
    }
    .chip.warn{background: rgba(245,158,11,0.95); color:#111827;}
    h1{margin:8px 0 6px; font-size: clamp(20px, 3.2vw, 34px); color:#fff;}
    .sub{color: rgba(255,255,255,0.9); margin:0; line-height:1.6}

    .grid{display:grid; grid-template-columns: 1fr; gap: 14px; margin-top: 14px;}
    .card{
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(17,24,39,0.08);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.18);
    }

    .topbar{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
    .progressWrap{flex:1 1 320px;}
    .progressLabel{display:flex; justify-content:space-between; color:var(--muted); font-size:13px; margin-bottom:6px;}
    .progress{width:100%; height:10px; border-radius:999px; background:#e5e7eb; overflow:hidden;}
    .progress>div{height:100%; width:0%; background: linear-gradient(90deg, #22c55e, #f59e0b);}

    .qhead{display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap;}
    .qno{font-weight:900; background:#111827; color:#fff; padding:6px 10px; border-radius:999px; font-size:12px;}
    .difficulty{font-weight:900; font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid rgba(17,24,39,0.10); background:#f3f4f6;}
    .difficulty.b{background:#ecfeff;}
    .difficulty.a{background:#fff7ed;}
    .difficulty.s{background:#fdf2f8;}

    .qtext{margin:10px 0 12px; font-size:16px; line-height:1.6;}
    .options{display:grid; gap:10px;}
    .opt{
      width:100%; text-align:left;
      border-radius:14px; border:1px solid rgba(17,24,39,0.12);
      background:#fff; padding:12px 12px; font-weight:800;
      cursor:pointer;
      transition: transform .06s ease, border-color .15s ease, box-shadow .15s ease;
    }
    .opt:hover{transform: translateY(-1px); box-shadow: 0 10px 18px rgba(0,0,0,0.08);}
    .opt.selected{border-color:#2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.18)}
    .opt.correct{border-color: var(--good); background: rgba(22,163,74,0.08)}
    .opt.wrong{border-color: var(--bad); background: rgba(220,38,38,0.08)}

    .explain{
      margin-top:12px; border-radius:14px; padding:12px;
      background:#f8fafc; border:1px solid rgba(17,24,39,0.10);
      display:none;
    }
    .explain.good{border-color: rgba(22,163,74,0.35); background: rgba(22,163,74,0.06)}
    .explain.bad{border-color: rgba(220,38,38,0.35); background: rgba(220,38,38,0.06)}
    .explain h3{margin:0 0 6px; font-size:14px;}
    .explain p{margin:0; line-height:1.6;}
    .explain .mini{margin-top:8px; color:var(--muted); font-size:12px;}

    .actions{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;}
    .btn{border:0; cursor:pointer; font-weight:900; padding:12px 14px; border-radius:12px; background:#111827; color:#fff;}
    .btn.secondary{background:#e5e7eb; color:#111827;}
    .btn:disabled{opacity:.45; cursor:not-allowed;}

    .result{display:none;}
    .score{font-size:34px; font-weight:1000; margin:2px 0 8px;}
    .judge{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; font-weight:900;}
    .judge.pass{background: rgba(22,163,74,0.12); color:#166534; border:1px solid rgba(22,163,74,0.35)}
    .judge.fail{background: rgba(220,38,38,0.12); color:#991b1b; border:1px solid rgba(220,38,38,0.35)}

    .footer{margin-top:14px; color: rgba(255,255,255,0.9); font-size:12px; text-align:center;}
    @media(min-width: 900px){.grid{grid-template-columns: 1.15fr 0.85fr; align-items:start;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div class="row">
        <span class="badge">è„±ãƒ»æš—è¨˜ï¼</span>
        <span class="chip">LECTURE NO.11ï½œå‘¼å¸ãƒ»é›»å­ä¼é”ç³»ï¼‹å®Ÿé¨“</span>
        <span class="chip warn">åˆæ ¼ãƒ©ã‚¤ãƒ³ï¼š8/10</span>
      </div>
      <h1>#11 ç¢ºèªãƒ†ã‚¹ãƒˆï½œå‘¼å¸ãƒ»é›»å­ä¼é”ç³»ï¼†å®Ÿé¨“ï¼ˆ10å•ãƒ»è§£èª¬ä»˜ãï¼‰</h1>
      <p class="sub">é›»å­ä¼é”ç³»ï¼ˆè¤‡åˆä½“Iâ€“IVï¼‰ã¨åŒ–å­¦æµ¸é€èª¬ã§ATPãŒã§ãã‚‹ç†ç”±ï¼NADH(2.5) vs FADHâ‚‚(1.5)ï¼RQï¼é˜»å®³å‰¤ãƒ»è„±å…±å½¹å‰¤ï¼ã‚°ãƒ©ãƒ•èª­è§£â€¦ã‚’ä¸€æ°—ã«å›ºã‚ã¾ã™ã€‚</p>
    </div>

    <div class="grid">
      <div class="card">
        <div class="topbar">
          <div class="progressWrap">
            <div class="progressLabel"><span id="progressText">é€²æ—ï¼š0/10</span><span id="scoreText">ã‚¹ã‚³ã‚¢ï¼š0</span></div>
            <div class="progress"><div id="progressBar"></div></div>
          </div>
          <div class="row">
            <span class="chip" style="background:#0ea5e9;">#é›»å­ä¼é”ç³»</span>
            <span class="chip" style="background:#0ea5e9;">#å‘¼å¸å•†RQ</span>
            <span class="chip" style="background:#16a34a;">8/10åˆæ ¼</span>
          </div>
        </div>

        <div id="questionArea" style="margin-top:14px;"></div>

        <div class="actions">
          <button class="btn secondary" id="prevBtn">â† å‰ã¸</button>
          <button class="btn" id="nextBtn">æ¬¡ã¸ â†’</button>
          <button class="btn" id="finishBtn" style="display:none;">æ¡ç‚¹ã—ã¦çµæœã‚’è¦‹ã‚‹</button>
          <button class="btn secondary" id="retryBtn" style="display:none;">ã‚‚ã†ä¸€åº¦ã‚„ã‚‹ï¼ˆãƒªãƒˆãƒ©ã‚¤ï¼‰</button>
        </div>
      </div>

      <div class="card">
        <h2 style="margin:0 0 10px; font-size:16px;">ä½¿ã„æ–¹</h2>
        <ul style="margin:0; padding-left:18px; line-height:1.75;">
          <li>å„å•4æŠã€‚é¸ã¶ã¨ãã®å ´ã§è§£èª¬ãŒå‡ºã¾ã™ã€‚</li>
          <li>æœ€å¾Œã«æ¡ç‚¹ã—ã€8/10ä»¥ä¸Šã§åˆæ ¼ã€‚</li>
          <li>é˜»å®³å‰¤ã¯ã€Œã©ã“ãŒæ­¢ã¾ã‚‹ï¼Ÿâ†’H+å‹¾é…ã¯ï¼Ÿâ†’ATPã¯ï¼Ÿã€ã§æ•´ç†ã€‚</li>
        </ul>

        <div style="margin-top:12px; padding:12px; border-radius:14px; background:#fff7ed; border:1px solid rgba(245,158,11,0.35);">
          <div style="font-weight:1000; margin-bottom:6px;">é »å‡ºã²ã£ã‹ã‘ï¼ˆã“ã®å›ã®æ ¸ï¼‰</div>
          <div style="line-height:1.65; font-weight:800; color:#7c2d12;">
            ãƒ»NADHã¯è¤‡åˆä½“Iã‹ã‚‰â†’ç´„2.5ATPï¼FADHâ‚‚ã¯è¤‡åˆä½“IIã‹ã‚‰â†’ç´„1.5ATPã€ã‚¹ãƒ©ã‚¤ãƒ‰ã€‘<br/>
            ãƒ»åŒ–å­¦æµ¸é€èª¬ï¼šH+å‹¾é…ãŒATPã®åŸå‹•åŠ›ã€å°æœ¬ã€‘<br/>
            ãƒ»RQ=COâ‚‚/Oâ‚‚ï¼ˆç³–1.0ãƒ»è„‚è‚ª0.7ãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯0.8ï¼‰ã€å°æœ¬ã€‘
          </div>
        </div>

        <div id="resultArea" class="result" style="margin-top:14px;">
          <h2 style="margin:0 0 6px; font-size:16px;">çµæœ</h2>
          <div class="score" id="finalScore">0/10</div>
          <div id="judge" class="judge fail">åˆ¤å®šï¼šæœªæ¡ç‚¹</div>
          <p id="advice" style="margin:10px 0 0; color:var(--muted); line-height:1.65;"></p>
        </div>
      </div>
    </div>

    <div class="footer">Â© KAZUKI ç”Ÿç‰©ï½œ#11 å‘¼å¸ãƒ»å®Ÿé¨“ ç¢ºèªãƒ†ã‚¹ãƒˆï¼ˆHTMLå˜ä½“ãƒ»å€‹äººæƒ…å ±ãªã—ï¼‰</div>
  </div>

<script>
const PASS_LINE = 8;

const questions = [
  {
    id: 1,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "è¬›ç¾©ã®æ¯”å–©ï¼šé›»å­ä¼é”ç³»ãŒã€ATMãƒã‚·ãƒ³ã€ã¨å‘¼ã°ã‚Œã‚‹ç†ç”±ã¨ã—ã¦æœ€ã‚‚è¿‘ã„ã®ã¯ï¼Ÿ",
    options: [
      "ATPã‚’åˆ†è§£ã—ã¦NADHã‚’ä½œã‚‹ã‹ã‚‰",
      "NADH/FADHâ‚‚ã¨ã„ã†â€œä½¿ã„ã«ãã„å½¢â€ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ATPã¨ã„ã†â€œä½¿ãˆã‚‹å½¢â€ã«äº¤æ›ã™ã‚‹ã‹ã‚‰",
      "COâ‚‚ã‚’å¸åã—ã¦Oâ‚‚ã‚’æ”¾å‡ºã™ã‚‹ã‹ã‚‰",
      "ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ã‚’åˆæˆã™ã‚‹ã‹ã‚‰"
    ],
    answer: 1,
    explain: "å°æœ¬ã®æ¯”å–©ã©ãŠã‚Šã€é›»å­ä¼é”ç³»ã¯NADH/FADHâ‚‚ã‚’ã€ATPã«äº¤æ›ã™ã‚‹ATMã€ã¨ã—ã¦ç†è§£ã™ã‚‹ã¨æµã‚ŒãŒæ´ã‚ã¾ã™ã€‚"
  },
  {
    id: 2,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "NADHã¨FADHâ‚‚ã®é•ã„ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "FADHâ‚‚ã¯è¤‡åˆä½“Iã‹ã‚‰å…¥ã‚Šã€NADHã¯è¤‡åˆä½“IIã‹ã‚‰å…¥ã‚‹",
      "NADHã¯è¤‡åˆä½“Iã‹ã‚‰å…¥ã‚Šç´„2.5ATPã€FADHâ‚‚ã¯è¤‡åˆä½“IIã‹ã‚‰å…¥ã‚Šç´„1.5ATP",
      "ã©ã¡ã‚‰ã‚‚å¿…ãšåŒã˜ATPæ•°ã‚’ç”Ÿã‚€",
      "ã©ã¡ã‚‰ã‚‚é…¸ç´ ã‚’ç›´æ¥åˆ†è§£ã—ã¦ATPã‚’ä½œã‚‹"
    ],
    answer: 1,
    explain: "ã‚¹ãƒ©ã‚¤ãƒ‰ã®æ ¸ï¼šNADHâ†’è¤‡åˆä½“Iï¼ˆP/Oâ‰ˆ2.5ï¼‰ã€FADHâ‚‚â†’è¤‡åˆä½“IIï¼ˆP/Oâ‰ˆ1.5ï¼‰ã€‚å…¥å£ã®é•ã„ï¼H+æ±²ã¿å‡ºã—å·®ã§ã™ã€‚"
  },
  {
    id: 3,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "è¤‡åˆä½“Iã€œIVã®ã†ã¡ã€H+ãƒãƒ³ãƒ—ã¨ã—ã¦åƒãã‚‚ã®ã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ­£ã—ã„ã®ã¯ï¼Ÿ",
    options: [
      "Iãƒ»IIãƒ»IIIãƒ»IV",
      "Iãƒ»IIIãƒ»IV",
      "IIãƒ»IIIã®ã¿",
      "IIãƒ»IVã®ã¿"
    ],
    answer: 1,
    explain: "è¬›ç¾©ã®æ•´ç†ï¼šH+ã‚’æ±²ã¿å‡ºã™ã®ã¯Iãƒ»IIIãƒ»IVã€‚IIã¯åŸºæœ¬çš„ã«ãƒãƒ³ãƒ—ã—ã¾ã›ã‚“ã€‚"
  },
  {
    id: 4,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "åŒ–å­¦æµ¸é€èª¬ï¼ˆchemiosmotic theoryï¼‰ã®æ ¸å¿ƒã¨ã—ã¦æ­£ã—ã„ã®ã¯ï¼Ÿ",
    options: [
      "ATPã¯Oâ‚‚ãŒç›´æ¥åˆ†è§£ã•ã‚Œã¦ã§ãã‚‹",
      "H+æ¿ƒåº¦å‹¾é…ï¼ˆï¼‹è†œé›»ä½ï¼‰ï¼ãƒ—ãƒ­ãƒˆãƒ³é§†å‹•åŠ›ãŒATPåˆæˆã®åŸå‹•åŠ›",
      "NADHã¯ATPã®ææ–™ãã®ã‚‚ã®",
      "ATPã¯ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢å¤–è†œã§ä½œã‚‰ã‚Œã‚‹"
    ],
    answer: 1,
    explain: "å°æœ¬ã®æ ¸å¿ƒï¼šé›»å­ã®è½å·®â†’H+å‹¾é…ã‚’ä½œã‚‹â†’ãã®å‹¾é…ã‚’ä½¿ã£ã¦ATPåˆæˆé…µç´ ãŒATPã‚’ä½œã‚‹ã€‚"
  },
  {
    id: 5,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "ATPåˆæˆé…µç´ ï¼ˆATP synthaseï¼‰ã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ï¼Ÿ",
    options: [
      "H+ãŒé€šã‚‹ã“ã¨ã§å›è»¢ã—ã€æ§‹é€ å¤‰åŒ–ã§ATPã‚’åˆæˆã™ã‚‹â€œå›è»¢ãƒ¢ãƒ¼ã‚¿ãƒ¼â€",
      "NADHã‚’ç›´æ¥ATPã«å¤‰ãˆã‚‹é…µç´ ",
      "COâ‚‚ã‚’å›ºå®šã™ã‚‹é…µç´ ",
      "ç´°èƒè³ªã§è§£ç³–ç³»ã‚’é€²ã‚ã‚‹é…µç´ "
    ],
    answer: 0,
    explain: "è¬›ç¾©ã®è¡¨ç¾ï¼šATPåˆæˆé…µç´ ã¯ã€ä¸–ç•Œæœ€å°ã®å›è»¢ãƒ¢ãƒ¼ã‚¿ãƒ¼ã€ã€‚H+ã®æµã‚ŒãŒå›è»¢åŠ›ã«ãªã‚ŠATPãŒä½œã‚‰ã‚Œã¾ã™ã€‚"
  },
  {
    id: 6,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "ã‚·ãƒ£ãƒˆãƒ«ç³»ã®é•ã„ï¼šãƒªãƒ³ã‚´é…¸-ã‚¢ã‚¹ãƒ‘ãƒ©ã‚®ãƒ³é…¸ã‚·ãƒ£ãƒˆãƒ«ãŒç¤ºã™ATPåæ”¯ï¼ˆç›®å®‰ï¼‰ã¨ã—ã¦è¬›ç¾©ã§æ‰±ã†ã®ã¯ï¼Ÿ",
    options: [
      "32 ATP",
      "30 ATP",
      "4 ATP",
      "2 ATP"
    ],
    answer: 0,
    explain: "è¬›ç¾©ã®æ•´ç†ï¼šãƒªãƒ³ã‚´é…¸-ã‚¢ã‚¹ãƒ‘ãƒ©ã‚®ãƒ³é…¸ã‚·ãƒ£ãƒˆãƒ«ï¼ˆåŠ¹ç‡é‡è¦–ï¼‰â†’32ATPã€ã‚°ãƒªã‚»ãƒ­ãƒªãƒ³é…¸ã‚·ãƒ£ãƒˆãƒ«â†’30ATPã€‚"
  },
  {
    id: 7,
    difficulty: "åŸºç¤ â˜…â˜†â˜†",
    level: "b",
    q: "å‘¼å¸å•†ï¼ˆRQï¼‰ã®å®šç¾©ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œï¼Ÿ",
    options: [
      "RQ = Oâ‚‚/COâ‚‚",
      "RQ = COâ‚‚/Oâ‚‚",
      "RQ = ATP/Oâ‚‚",
      "RQ = NADH/FADHâ‚‚"
    ],
    answer: 1,
    explain: "å°æœ¬ã®å®šç¾©ï¼šRQ = æ”¾å‡ºCOâ‚‚é‡ / æ¶ˆè²»Oâ‚‚é‡ã€‚"
  },
  {
    id: 8,
    difficulty: "å¿œç”¨ â˜…â˜…â˜†",
    level: "a",
    q: "å‘¼å¸å•†RQã®å…¸å‹å€¤ã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ­£ã—ã„ã®ã¯ï¼Ÿ",
    options: [
      "ç³–1.0ãƒ»è„‚è‚ª0.7ãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯0.8",
      "ç³–0.7ãƒ»è„‚è‚ª1.0ãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯0.8",
      "ç³–1.0ãƒ»è„‚è‚ª1.0ãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯0.7",
      "ç³–0.8ãƒ»è„‚è‚ª0.7ãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯1.0"
    ],
    answer: 0,
    explain: "è¬›ç¾©ã®é »å‡ºã‚»ãƒƒãƒˆï¼šç³–1.0ã€è„‚è‚ª0.7ã€ã‚¿ãƒ³ãƒ‘ã‚¯è³ª0.8ã€‚"
  },
  {
    id: 9,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "ãƒ¯ãƒ¼ãƒ«ãƒ–ãƒ«ã‚°æ¤œåœ§è¨ˆã§KOHã‚’å…¥ã‚Œã‚‹ä¸»ãªç›®çš„ã¯ï¼Ÿ",
    options: [
      "Oâ‚‚ã‚’å¸åã—ã¦é‡ã‚’æ¸¬ã‚‹ãŸã‚",
      "COâ‚‚ã‚’å¸åã—ã¦ã€æ°—ä½“ä½“ç©ã®å¤‰åŒ–ã‹ã‚‰Oâ‚‚æ¶ˆè²»ã‚’èª­ã¿å–ã‚‹ãŸã‚",
      "ATPã‚’åˆ†è§£ã™ã‚‹ãŸã‚",
      "æ¸©åº¦ã‚’ä¸€å®šã«ã™ã‚‹ãŸã‚"
    ],
    answer: 1,
    explain: "å°æœ¬ã®è¦ç‚¹ï¼šKOHã¯COâ‚‚ã‚’å¸åã€‚COâ‚‚ãŒé™¤ã‹ã‚Œã‚‹ã¨ã€æ®‹ã‚‹ä½“ç©å¤‰åŒ–ï¼ä¸»ã«Oâ‚‚æ¶ˆè²»ã®æŒ‡æ¨™ã«ãªã‚Šã¾ã™ã€‚"
  },
  {
    id: 10,
    difficulty: "ç™ºå±• â˜…â˜…â˜…",
    level: "s",
    q: "é˜»å®³å‰¤ãƒ»è„±å…±å½¹å‰¤ã®æ•´ç†ï¼šDNPã®ä½œç”¨ã¨ã—ã¦æ­£ã—ã„ã®ã¯ï¼Ÿ",
    options: [
      "è¤‡åˆä½“IVã‚’æ­¢ã‚ã¦é…¸ç´ æ¶ˆè²»ã‚‚ATPåˆæˆã‚‚æ­¢ã‚ã‚‹",
      "ATPåˆæˆé…µç´ ã‚’ç›´æ¥æ­¢ã‚ã‚‹",
      "H+å‹¾é…ã‚’å£Šã—ã¦ATPåˆæˆã‚’ä½ä¸‹ã•ã›ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ç†±ã¨ã—ã¦æ•£é€¸ã™ã‚‹",
      "è§£ç³–ç³»ã ã‘ã‚’æ­¢ã‚ã‚‹"
    ],
    answer: 2,
    explain: "è¬›ç¾©ã®æ•´ç†ï¼šDNPã¯è„±å…±å½¹å‰¤ã€‚H+å‹¾é…ã‚’ã‚·ãƒ§ãƒ¼ãƒˆã•ã›ã€ATPã¯ä½œã‚Šã«ãããªã‚Šã€ç†±ã¨ã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæ•£é€¸ã—ã¾ã™ã€‚"
  }
];

let state = { index: 0, answers: Array(questions.length).fill(null), checked: Array(questions.length).fill(false) };

const elQ = document.getElementById('questionArea');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const finishBtn = document.getElementById('finishBtn');
const retryBtn = document.getElementById('retryBtn');
const progressText = document.getElementById('progressText');
const scoreText = document.getElementById('scoreText');
const progressBar = document.getElementById('progressBar');
const resultArea = document.getElementById('resultArea');
const finalScore = document.getElementById('finalScore');
const judge = document.getElementById('judge');
const advice = document.getElementById('advice');

function calcScore(){
  let s=0;
  for(let i=0;i<questions.length;i++) if(state.answers[i]===questions[i].answer) s++;
  return s;
}

function updateTop(){
  const done = state.answers.filter(v=>v!==null).length;
  progressText.textContent = `é€²æ—ï¼š${state.index+1}/${questions.length}ï¼ˆå›ç­”æ¸ˆã¿ ${done}/${questions.length}ï¼‰`;
  const s = calcScore();
  scoreText.textContent = `ã‚¹ã‚³ã‚¢ï¼š${s}`;
  progressBar.style.width = `${((state.index)/ (questions.length-1))*100}%`;
}

function render(){
  const q = questions[state.index];
  updateTop();

  const picked = state.answers[state.index];
  const checked = state.checked[state.index];

  elQ.innerHTML = `
    <div class="qhead">
      <div class="qno">Q${q.id}</div>
      <div class="difficulty ${q.level}">${q.difficulty}</div>
    </div>
    <div class="qtext">${q.q}</div>
    <div class="options">
      ${q.options.map((t,idx)=>{
        let cls = 'opt';
        if(picked===idx) cls += ' selected';
        if(checked){
          if(idx===q.answer) cls += ' correct';
          else if(picked===idx && picked!==q.answer) cls += ' wrong';
        }
        return `<button class="${cls}" data-idx="${idx}">${['A','B','C','D'][idx]}. ${t}</button>`;
      }).join('')}
    </div>
    <div class="explain" id="explainBox"></div>
  `;

  const explainBox = document.getElementById('explainBox');
  if(checked){
    const ok = picked===q.answer;
    explainBox.className = 'explain ' + (ok ? 'good':'bad');
    explainBox.style.display = 'block';
    explainBox.innerHTML = `
      <h3>${ok ? 'âœ… æ­£è§£ï¼' : 'âŒ ä¸æ­£è§£â€¦'}</h3>
      <p>${q.explain}</p>
      <div class="mini">ãƒã‚¤ãƒ³ãƒˆï¼šã€ã©ã“ãŒæ­¢ã¾ã‚‹â†’H+å‹¾é…â†’ATPâ†’Oâ‚‚/COâ‚‚ã€ã®é †ã«å› æœã§è¿½ã†ã€‚</div>
    `;
  } else {
    explainBox.style.display = 'none';
  }

  prevBtn.disabled = state.index===0;
  const isLast = state.index===questions.length-1;
  nextBtn.style.display = isLast ? 'none' : 'inline-block';
  finishBtn.style.display = isLast ? 'inline-block' : 'none';

  document.querySelectorAll('.opt').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const idx = Number(btn.getAttribute('data-idx'));
      state.answers[state.index]=idx;
      state.checked[state.index]=true;
      render();
    });
  });
}

prevBtn.addEventListener('click', ()=>{ state.index--; render(); });
nextBtn.addEventListener('click', ()=>{ state.index++; render(); });

finishBtn.addEventListener('click', ()=>{
  const score = calcScore();
  resultArea.style.display = 'block';
  finalScore.textContent = `${score}/10`;
  const passed = score>=PASS_LINE;
  judge.className = 'judge ' + (passed ? 'pass':'fail');
  judge.textContent = passed ? `ğŸ‰ åˆæ ¼ï¼ˆ${PASS_LINE}/10ä»¥ä¸Šï¼‰` : `ã‚ã¨${PASS_LINE-score}å•ã§åˆæ ¼ï¼ˆåˆæ ¼ãƒ©ã‚¤ãƒ³ ${PASS_LINE}/10ï¼‰`;

  const unanswered = state.answers.filter(v=>v===null).length;
  let msg='';
  if(unanswered>0) msg += `æœªå›ç­”ãŒ${unanswered}å•ã‚ã‚Šã¾ã™ã€‚ã¾ãšå…¨å•å›ç­”â†’ãƒªãƒˆãƒ©ã‚¤æ¨å¥¨ã€‚ `;
  if(passed){
    msg += 'æ¬¡ã¯ã€Œè¤‡åˆä½“Iâ€“IVâ†’H+â†’ATPåˆæˆé…µç´ ã€ã‚’å›³ã§æã‘ã‚‹ã‹æŒ‘æˆ¦ï¼';
  } else {
    msg += 'ã¾ãšã¯Q2/Q4/Q9ï¼ˆå…¥å£å·®ãƒ»åŒ–å­¦æµ¸é€ãƒ»è£…ç½®åŸç†ï¼‰ã‚’è¨€èªåŒ–â†’å›³è§£ã—ã¦å†æŒ‘æˆ¦ï¼';
  }
  advice.textContent = msg;

  retryBtn.style.display='inline-block';
  finishBtn.disabled = true;
});

retryBtn.addEventListener('click', ()=>{
  state = { index:0, answers:Array(questions.length).fill(null), checked:Array(questions.length).fill(false)};
  resultArea.style.display='none';
  finishBtn.disabled=false;
  retryBtn.style.display='none';
  render();
});

render();
</script>
</body>
</html>
